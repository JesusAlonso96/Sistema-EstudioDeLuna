<app-cargando *ngIf="cargando" texto="Cargando productos..."></app-cargando>
<app-cargando *ngIf="cargandoProducto" texto="Creando producto..."></app-cargando>
<app-cargando *ngIf="cargandoEliminado" texto="Eliminando producto..."></app-cargando>
<mat-tab-group class="tab" style="width:100%; height: 80%;">
    <mat-tab *ngFor="let familia of familias; let i = index" [label]="familia.nombre">
        <ng-template matTabContent>
            <mat-toolbar>
                <button mat-button (click)="abrirAgregarProducto(familia, i)" matTooltip="Agregar un nuevo producto"
                    class="agregarProducto">
                    <mat-icon>add</mat-icon> Nuevo producto
                </button>
            </mat-toolbar>
            <div class="col-lg-12" style="margin-top: 20px;">
                <div class="row">
                    <ng-container *ngFor="let producto of familia.productos; let j = index">
                        <div class="col-lg-3">
                            <mat-card class="card-productos">
                                <mat-card-header>
                                    <button class="eliminarProducto" (click)="abrirEliminarProducto(i,j)"
                                        mat-icon-button color="warn">
                                        <mat-icon>close</mat-icon>
                                    </button>
                                    <mat-card-title>{{producto.nombre}} {{producto.num_fotos}} fotos
                                    </mat-card-title>
                                    <mat-card-subtitle>${{producto.precio}} pesos</mat-card-subtitle>
                                </mat-card-header>
                                <mat-card-content>
                                    <p *ngIf="producto.descripcion">{{producto.descripcion}}</p>
                                    <p *ngIf="!producto.descripcion">Producto sin descripcion</p>
                                </mat-card-content>
                                <mat-card-actions align="start">
                                    <button mat-raised-button color="primary" (click)="verDetalles(producto)">Ver
                                        detalles</button>
                                    <button mat-stroked-button
                                        (click)="abrirEditarProducto(producto,i,j)">Editar</button>
                                </mat-card-actions>
                            </mat-card>
                        </div>
                    </ng-container>
                </div>
            </div>


        </ng-template>

    </mat-tab>
</mat-tab-group>