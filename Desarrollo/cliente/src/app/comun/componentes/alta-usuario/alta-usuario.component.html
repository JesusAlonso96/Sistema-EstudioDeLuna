<app-barra-cargando [cargando]="cargando"></app-barra-cargando>
<div class="container">
    <div class="row">
        <div class="col-lg-12">
            <mat-card class="margin-top" style="margin-bottom: 40px;">
                <form #usuarioForm="ngForm" class="formUsuario">
                    <h3 class="text-center">Registrar usuario</h3>
                    <div class="row">
                        <div class="col-lg-12">
                            <mat-form-field class="full-width" appearance="outline">
                                <mat-label>Nombre de pila</mat-label>
                                <input [(ngModel)]="usuario.nombre" #nombre="ngModel" name="nombre" matInput
                                    placeholder="Ingresa tu nombre "
                                    pattern="^[a-zA-ZÀ-ÿ\u00f1\u00d1]*(\s*[a-zA-ZÀ-ÿ\u00f1\u00d1]*)*[a-zA-ZÀ-ÿ\u00f1\u00d1 ]+$"
                                    required>
                                <mat-error
                                    *ngIf="(nombre.invalid && (nombre.dirty || nombre.touched)) && nombre.errors.required">
                                    Por favor ingresa tu nombre</mat-error>
                                <mat-error
                                    *ngIf="(nombre.invalid && (nombre.dirty || nombre.touched)) && nombre.errors.pattern">
                                    Por favor ingresa solo letras</mat-error>
                            </mat-form-field>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-6">
                            <mat-form-field class="full-width" appearance="outline">
                                <mat-label>Apellido paterno</mat-label>
                                <input [(ngModel)]="usuario.ape_pat" #ape_pat="ngModel" name="ape_pat" matInput
                                    placeholder="Ingresa tu apellido paterno"
                                    pattern="^[a-zA-ZÀ-ÿ\u00f1\u00d1]*(\s*[a-zA-ZÀ-ÿ\u00f1\u00d1]*)*[a-zA-ZÀ-ÿ\u00f1\u00d1 ]+$"
                                    required>
                                <mat-error
                                    *ngIf="(ape_pat.invalid && (ape_pat.dirty || ape_pat.touched)) && ape_pat.errors.required">
                                    Por favor ingresa tu apellido paterno</mat-error>
                                <mat-error
                                    *ngIf="(ape_pat.invalid && (ape_pat.dirty || ape_pat.touched)) && ape_pat.errors.pattern">
                                    Por favor ingresa solo letras</mat-error>
                            </mat-form-field>
                        </div>
                        <div class="col-lg-6">
                            <mat-form-field class="full-width" appearance="outline">
                                <mat-label>Apellido paterno</mat-label>
                                <input [(ngModel)]="usuario.ape_mat" #ape_mat="ngModel" name="ape_mat" matInput
                                    placeholder="Ingresa tu apellido paterno"
                                    pattern="^[a-zA-ZÀ-ÿ\u00f1\u00d1]*(\s*[a-zA-ZÀ-ÿ\u00f1\u00d1]*)*[a-zA-ZÀ-ÿ\u00f1\u00d1 ]+$"
                                    required>
                                <mat-error
                                    *ngIf="(ape_mat.invalid && (ape_mat.dirty || ape_mat.touched)) && ape_mat.errors.required">
                                    Por favor ingresa tu apellido materno</mat-error>
                                <mat-error
                                    *ngIf="(ape_mat.invalid && (ape_mat.dirty || ape_mat.touched)) && ape_mat.errors.pattern">
                                    Por favor ingresa solo letras</mat-error>
                            </mat-form-field>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-3">
                            <mat-form-field class="full-width" appearance="outline">
                                <mat-label>Nombre de usuario</mat-label>
                                <input [(ngModel)]="usuario.username" #username="ngModel" name="username" matInput
                                    placeholder="Ingresa un nombre de usuario" pattern="^[a-zA-Z0-9]+$" required>
                                <mat-error
                                    *ngIf="(username.invalid && (username.dirty || username.touched)) && username.errors.required">
                                    Por favor ingresa tu nombre</mat-error>
                                <mat-error
                                    *ngIf="(username.invalid && (username.dirty || username.touched)) && username.errors.pattern">
                                    Por favor ingresa solo letras</mat-error>
                            </mat-form-field>
                        </div>
                        <div class="col-lg-5">
                            <mat-form-field class="full-width" appearance="outline">
                                <mat-label>Correo electronico</mat-label>
                                <input [(ngModel)]="usuario.email" #email="ngModel" name="email" matInput type="email"
                                    placeholder="Ingresa tu correo electronico"
                                    pattern="^[a-zA-Z0-9.!#$%&’*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$"
                                    required>
                                <mat-error
                                    *ngIf="(email.invalid && (email.dirty || email.touched)) &&  email.errors.required">
                                    Por favor ingresa tu correo electronico</mat-error>
                                <mat-error
                                    *ngIf="(email.invalid && (email.dirty || email.touched)) &&  email.errors.pattern">
                                    Por favor ingresa un formato de correo valido</mat-error>
                            </mat-form-field>
                        </div>
                        <div class="col-lg-4">
                            <mat-form-field class="full-width" appearance="outline">
                                <mat-label>Telefono celular</mat-label>
                                <input [(ngModel)]="usuario.telefono" #telefono="ngModel" name="telefono" matInput
                                    type="email" pattern="^[0-9]+$" placeholder="Ingresa tu telefono" minlength="10"
                                    required>
                                <mat-error
                                    *ngIf="(telefono.invalid && (telefono.dirty || telefono.touched)) &&  telefono.errors.required">
                                    Por favor ingresa tu numero de telefono</mat-error>
                                <mat-error
                                    *ngIf="(telefono.invalid && (telefono.dirty || telefono.touched)) && telefono.errors.minlength">
                                    Por favor ingresa 10 digitos</mat-error>
                                <mat-error
                                    *ngIf="(telefono.invalid && (telefono.dirty || telefono.touched)) && telefono.errors.pattern">
                                    Por favor ingresa solo digitos</mat-error>
                            </mat-form-field>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-6">
                            <mat-form-field class="full-width" appearance="outline">
                                <mat-label>Contraseña</mat-label>
                                <input [(ngModel)]="usuario.contrasena" #contrasena="ngModel" name="contrasena" matInput
                                    [type]="hide ? 'password' : 'text'" placeholder="Ingresa una contraseña" required>
                                <button mat-icon-button matSuffix (click)="hide = !hide"
                                    [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hide">
                                    <mat-icon>{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
                                </button>
                                <mat-error
                                    *ngIf="(contrasena.invalid && (contrasena.dirty || contrasena.touched)) && contrasena.errors.required">
                                    Por favor confirma la contraseña</mat-error>
                            </mat-form-field>
                        </div>
                        <div class="col-lg-6">
                            <mat-form-field class="full-width" appearance="outline">
                                <mat-label>Confirmar contraseña</mat-label>
                                <input [(ngModel)]="confirmarContra" #confirmarContra2="ngModel" name="confirmarContra2"
                                    matInput [type]="hide2 ? 'password' : 'text'" placeholder="Ingresa una contraseña"
                                    required>
                                <button mat-icon-button matSuffix (click)="hide2 = !hide2"
                                    [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hide">
                                    <mat-icon>{{hide2 ? 'visibility_off' : 'visibility'}}</mat-icon>
                                </button>
                                <mat-error
                                    *ngIf="(confirmarContra2.invalid && (confirmarContra2.dirty || confirmarContra2.touched)) && confirmarContra2.errors.required">
                                    Por favor confirma la contraseña</mat-error>
                            </mat-form-field>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-6">
                            <mat-form-field class="full-width" appearance="outline">
                                <mat-label>Permisos</mat-label>
                                <mat-select [(ngModel)]="usuario.rol" #rol="ngModel" name="rol" required>
                                    <mat-option [value]="2">Administrador</mat-option>
                                    <mat-option [value]="1">Supervisor</mat-option>
                                    <mat-option [value]="0">Empleado</mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>
                        <div class="col-lg-6" *ngIf="usuario.rol == 0">
                            <mat-form-field class="full-width" appearance="outline">
                                <mat-label>Rol</mat-label>
                                <mat-select [(ngModel)]="usuario.rol_sec" #rol_sec="ngModel" name="rol_sec" required>
                                    <mat-option [value]="1">Fotografo</mat-option>
                                    <mat-option [value]="2">Recepcionista</mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-12">
                            <div align="end">
                                <button mat-raised-button color="primary" [disabled]="!usuarioForm.valid"
                                    (click)="registrarUsuario(usuarioForm)">Registrar</button>
                            </div>
                        </div>
                    </div>
                </form>
            </mat-card>
        </div>
    </div>
</div>